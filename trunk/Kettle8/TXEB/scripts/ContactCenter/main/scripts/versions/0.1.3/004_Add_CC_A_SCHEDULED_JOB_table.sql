CREATE SEQUENCE SEQ_CC_A_SCHEDULED_JOB START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999999999999 MINVALUE 1 CACHE 20 ;

CREATE TABLE CC_A_SCHEDULED_JOB
  (
    SCHEDULED_JOB_ID NUMBER NOT NULL ,
    START_DATETIME   VARCHAR2 (50) NOT NULL ,
    END_DATETIME     VARCHAR2 (50) NOT NULL ,
    EXECUTION_DATE   DATE ,
    SUCCESS          CHAR (1) DEFAULT '0'
  )
  LOGGING ;
ALTER TABLE CC_A_SCHEDULED_JOB ADD CONSTRAINT CC_A_ADHOC_JOBv1_PK PRIMARY KEY
(
  SCHEDULED_JOB_ID
)
;
ALTER TABLE CC_A_SCHEDULED_JOB ADD CONSTRAINT CC_A_SCHEDULED_JOB__UN UNIQUE
(
  EXECUTION_DATE
)
;

CREATE OR REPLACE TRIGGER BIU_CC_A_SCHEDULED_JOB 
    BEFORE INSERT OR UPDATE ON CC_A_SCHEDULED_JOB 
    FOR EACH ROW 
    ENABLE 
BEGIN 
IF INSERTING AND :NEW.SCHEDULED_JOB_ID IS NULL THEN 
          SELECT SEQ_CC_A_SCHEDULED_JOB.NEXTVAL INTO :NEW.SCHEDULED_JOB_ID FROM DUAL;
END IF;
IF INSERTING THEN 
          :NEW.EXECUTION_DATE := SYSDATE;
END IF;
END;  
/

INSERT INTO CC_L_PATCH_LOG ( PATCH_VERSION , SCRIPT_SEQUENCE , SCRIPT_NAME)
VALUES ('0.1.3','004','004_Add_CC_A_SCHEDULED_JOB_table');

COMMIT;