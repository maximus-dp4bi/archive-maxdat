DROP TABLE CC_C_IVR_LANGUAGE;

CREATE TABLE CC_C_IVR_LANGUAGE (
IVR_LANG_ID     NUMBER(38)
, CODE   VARCHAR2(10)
, NAME   VARCHAR2(100)
, REPORT_LABEL  VARCHAR2(100)
, CREATE_DT   DATE
, UPDATE_DT   DATE
, UPDATED_BY    VARCHAR2(30)
)
        TABLESPACE MAXDAT_DATA 
        LOGGING 
;

ALTER TABLE CC_C_IVR_LANGUAGE 
    ADD CONSTRAINT CC_C_IVR_LANGUAGE_PK PRIMARY KEY ( IVR_LANG_ID ) ;


ALTER TABLE CC_C_IVR_LANGUAGE 
    ADD CONSTRAINT CC_C_IVR_LANGUAGE_UN UNIQUE ( CODE);
    
CREATE SEQUENCE SEQ_IVR_LANG_ID;  

CREATE OR REPLACE TRIGGER BIU_CC_C_IVR_LANGUAGE
    BEFORE INSERT OR UPDATE ON CC_C_IVR_LANGUAGE 
    FOR EACH ROW 
BEGIN
IF INSERTING AND :NEW.IVR_LANG_ID IS NULL THEN 
          SELECT SEQ_IVR_LANG_ID.NEXTVAL INTO :NEW.IVR_LANG_ID FROM DUAL;
END IF;
IF INSERTING THEN 
          :NEW.CREATE_DT := SYSDATE;
END IF;
:NEW.UPDATE_DT := SYSDATE;
:NEW.UPDATED_BY := USER;
END; 

/

CREATE OR REPLACE VIEW CC_C_IVR_LANGUAGE_SV AS 
SELECT * FROM CC_C_IVR_LANGUAGE;

GRANT SELECT ON CC_C_IVR_LANGUAGE TO CISCO_READ_ONLY;
GRANT SELECT ON CC_C_IVR_LANGUAGE_SV TO CISCO_READ_ONLY;
GRANT SELECT, INSERT, UPDATE, DELETE ON CC_C_IVR_LANGUAGE TO SD25802, SR18956;
GRANT SELECT ON CC_C_IVR_LANGUAGE TO MAXDAT_READ_ONLY;
GRANT SELECT ON CC_C_IVR_LANGUAGE_SV TO MAXDAT_READ_ONLY;


