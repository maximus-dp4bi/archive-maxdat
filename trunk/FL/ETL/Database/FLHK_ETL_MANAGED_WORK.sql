--------------------------------------------------------
--  File created - Monday-August-19-2013   
--------------------------------------------------------
DROP TABLE "FLHK_ETL_MANAGE_WORK";
/
--------------------------------------------------------
--  DDL for Table FLHK_ETL_MANAGE_WORK
--------------------------------------------------------

  CREATE TABLE "FLHK_ETL_MANAGE_WORK" 
  ("MW_ID" NUMBER,
 "TASK_ID" NUMBER,
 "PARENT_TASK_ID" NUMBER,
 "TASK_TYPE" VARCHAR2(100),
 "TASK_STATUS" VARCHAR2(100),
 "STATUS_DATE" DATE,
 "STATUS_REASON" VARCHAR2(100),
 "CREATE_DATE" DATE,
 "CREATED_BY_NAME" VARCHAR2(100),
 "PRIORITY" VARCHAR2(100),
 "DUE_DATE" DATE,
 "ASSIGNED_TO" VARCHAR2(100),
 "QUEUE" VARCHAR2(100),
 "CONTEXT" VARCHAR2(100),
 "DRIVER_TYPE" VARCHAR2(100),
 "DRIVER_KEY" VARCHAR2(50),
 "ACTION_CATEGORY" VARCHAR2(100),
 "RULE_EXECUTED" VARCHAR2(100),
 "ROLE_NAME" VARCHAR2(20),
 "CANCEL_WORK_DATE" DATE,
 "COMPLETE_DATE" DATE,
 "INSTANCE_STATUS" VARCHAR2(100) DEFAULT 'Active',
 "LAST_UPDATE_DATE" DATE,
 "LAST_UPDATE_BY_NAME" VARCHAR2(100),
 "ASF_CANCEL_WORK" VARCHAR2(1) DEFAULT 'N',
 "STAGE_DONE_DATE" DATE DEFAULT NULL,
 "STG_EXTRACT_DATE" DATE DEFAULT SYSDATE,
 "STG_LAST_UPDATE_DATE" DATE DEFAULT SYSDATE,
 "ASF_COMPLETE_WORK" VARCHAR2(1) DEFAULT 'N',
 "ASSD_COMPLETE_TASK" DATE,
 "ASED_COMPLETE_TASK" DATE,
 "MW_PROCESSED" VARCHAR2(1) DEFAULT 'N',
 "WRSTATUS_ID"  NUMBER) ;
/
SET DEFINE OFF;
/
--------------------------------------------------------
--  DDL for Index FLHK_ETL_MANAGED_WORK_PK
--------------------------------------------------------

CREATE  UNIQUE INDEX "FLHK_ETL_MANAGED_WORK_PK" ON "FLHK_ETL_MANAGE_WORK" ("MW_ID") ;
/
CREATE  SEQUENCE  "FLHK_ETL_MANAGED_WORK_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 81 CACHE 20 NOORDER  NOCYCLE ;
/
--------------------------------------------------------
--  Constraints for Table FLHK_ETL_MANAGE_WORK
--------------------------------------------------------

  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("TASK_ID" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("TASK_TYPE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("TASK_STATUS" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("STATUS_DATE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("PRIORITY" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("DRIVER_TYPE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("DRIVER_KEY" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("INSTANCE_STATUS" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("ASF_CANCEL_WORK" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("STG_EXTRACT_DATE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("STG_LAST_UPDATE_DATE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("ASF_COMPLETE_WORK" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("ASSD_COMPLETE_TASK" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("MW_PROCESSED" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" ADD CONSTRAINT "FLHK_ETL_MANAGED_WORK_PK" PRIMARY KEY ("MW_ID") ENABLE;
/
--------------------------------------------------------
--  DDL for Trigger TRG_ETL_MANAGE_WORK
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "TRG_ETL_MANAGE_WORK" 
   before insert on "FLHK_ETL_MANAGE_WORK" 
   for each row 
begin  
   if inserting then 
      if :NEW."MW_ID" is null then 
         select FLHK_ETL_MANAGED_WORK_SEQ.nextval into :NEW."MW_ID" from dual; 
      end if; 
   end if; 
end;
/
ALTER TRIGGER "TRG_ETL_MANAGE_WORK" ENABLE;
/
