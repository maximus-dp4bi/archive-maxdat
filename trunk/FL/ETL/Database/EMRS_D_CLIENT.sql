--------------------------------------------------------
--  File created - Thursday-May-01-2014   
--------------------------------------------------------
DROP TABLE "EMRS_D_CLIENT";
--------------------------------------------------------
--  DDL for Table EMRS_D_CLIENT
--------------------------------------------------------

  CREATE TABLE "EMRS_D_CLIENT" 
  ("CLIENT_ID" NUMBER(38,0),
  "CLIENT_NUMBER" NUMBER(11,0),
  "MANAGED_CARE_PROGRAM" VARCHAR2(50),
  "FULL_NAME" VARCHAR2(100),
  "FIRST_NAME" VARCHAR2(80),
  "MIDDLE_INITIAL" VARCHAR2(1),
  "LAST_NAME" VARCHAR2(30),
  "COVERAGE_TYPE" VARCHAR2(2),
  "ENROLLMENT_STATUS" VARCHAR2(1),
  "TRANSACTION_HOLD" VARCHAR2(1), 
  "MANAGED_CARE_CANDIDATE" VARCHAR2(1),
  "BASE_PLAN" VARCHAR2(32),
  "RACE" VARCHAR2(50),
  "SEX" VARCHAR2(1),
  "DATE_OF_BIRTH" DATE, 
  "PHONE" VARCHAR2(12),
  "SOCIAL_SECURITY_NUMBER" VARCHAR2(11),
  "ADD1" VARCHAR2(40),
  "ADD2" VARCHAR2(40),
  "CITY" VARCHAR2(30),
  "ST" VARCHAR2(2),
  "ZIP" VARCHAR2(15), 
  "COUNTY" VARCHAR2(32),
  "SSN_RAILROAD_CLAIM_NUMBER" VARCHAR2(12), 
  "RECORD_DATE" DATE, 
  "RECORD_TIME" VARCHAR2(5), 
  "RECORD_NAME" VARCHAR2(80),
  "MODIFIED_DATE" DATE,
  "MODIFIED_TIME" VARCHAR2(5),
  "MODIFIED_NAME" VARCHAR2(80),
  "VERSION" NUMBER(38,0),
  "DATE_OF_VALIDITY_START" DATE, 
  "DATE_OF_VALIDITY_END" DATE,
  "DATE_CREATED" DATE, 
  "CREATED_BY" VARCHAR2(18),
  "UPDATED_BY" VARCHAR2(18), 
  "DATE_UPDATED" DATE, 
  "PREGNANT_MEMBER" VARCHAR2(1), 
  "NEWBORN" VARCHAR2(1),
  "ADULT_OR_CHILD" VARCHAR2(1),
  "THIRD_PARTY_RESOURCES_AVAIL" VARCHAR2(1),
  "MIGRANT_WORKER_FLAG" VARCHAR2(1), 
  "MANAGED_VIA_GEN_REV_FLAG" VARCHAR2(1), 
  "MANAGED_VIA_STATE_FUND_FLAG" VARCHAR2(1), 
  "RECEIVING_TANF_FLAG" VARCHAR2(1),
  "RECEIVING_SSI_FLAG" VARCHAR2(1),
  "CLIENT_REPORTED_SHCN" VARCHAR2(1), 
  "PLAN_REPORTED_SHCN" VARCHAR2(1), 
  "DATE_OF_DEATH" DATE, 
  "DATE_OF_DEATH_SOURCE" VARCHAR2(30),
  "SOURCE_RECORD_ID" NUMBER(22,0),
  "CURRENT_FLAG" VARCHAR2(1) DEFAULT 'N', 
  "CURRENT_CLIENT_ID" NUMBER(18,0), 
  "CLNT_CLNT_CLIENT_ID" NUMBER(18,0),
  "CLNT_ETHNICITY" VARCHAR2(32), 
  "CLNT_TPL_PRESENT" VARCHAR2(1),
  "CLNT_NATIONAL_ID" VARCHAR2(15), 
  "CLNT_FROM_PACMIS" VARCHAR2(1),
  "CLNT_SHARE_PREMIUM" VARCHAR2(1), 
  "CLNT_NOT_BORN" VARCHAR2(1), 
  "CLNT_HIPAA_PRIVACY_IND" VARCHAR2(1),
  "CLNT_FINET_VENDOR_NBR" VARCHAR2(10), 
  "CLNT_ENROLL_STATUS" VARCHAR2(32), 
  "CLNT_ENROLL_STATUS_DATE" DATE,
  "SCHED_AUTO_ASSIGN_DATE" DATE, 
  "CLNT_CIN" VARCHAR2(30),
  "CLNT_COMMENT" VARCHAR2(4000), 
  "CLNT_PSEUDO_ID" VARCHAR2(10),
  "SSNVL_ID" NUMBER(38,0),
  "NOTE_REF_ID" NUMBER(18,0), 
  "CLNT_MARITAL_CD" VARCHAR2(32),
  "CLNT_STATUS_CD" VARCHAR2(32),
  "CLNT_EXPECTED_DOB" DATE, 
  "CLNT_PREG_TERM_DATE" DATE,
  "CLNT_PREG_TERM_REAS_CD" VARCHAR2(32),
  "CLIENT_TYPE_CD" VARCHAR2(10), 
  "SUPPLEMENTAL_NBR" VARCHAR2(32), 
  "STATE_LANGUAGE" VARCHAR2(32),
  "DO_NOT_CALL_IND" NUMBER(1,0),
  "WRITTEN_LANGUAGE" VARCHAR2(32),
  "SUFFIX" VARCHAR2(32), 
  "SALUTATION_CD" VARCHAR2(32),
  "DOMESTIC_VIOLENCE_IND" NUMBER(1,0),
  "ENGLISH_FLUENCY_CD" VARCHAR2(32), 
  "ENGLISH_LITERACY_CD" VARCHAR2(32),
  "TRIBE_CD" VARCHAR2(32), 
  "CLNT_GENERIC_FIELD1_DATE" DATE, 
  "CLNT_GENERIC_FIELD2_DATE" DATE,
  "CLNT_GENERIC_FIELD3_NUM" NUMBER(18,0),
  "CLNT_GENERIC_FIELD4_NUM" NUMBER(18,0),
  "CLNT_GENERIC_FIELD5_TXT" VARCHAR2(256),
  "CLNT_GENERIC_FIELD6_TXT" VARCHAR2(256),
  "CLNT_GENERIC_FIELD7_TXT" VARCHAR2(256),
  "CLNT_GENERIC_FIELD8_TXT" VARCHAR2(256),
  "CLNT_GENERIC_FIELD9_TXT" VARCHAR2(256),
  "CLNT_GENERIC_FIELD10_TXT" VARCHAR2(256), 
  "CLNT_GENERIC_REF11_ID" NUMBER(18,0),
  "CLNT_GENERIC_REF12_ID" NUMBER(18,0),
  "DO_NOT_TEXT_IND" NUMBER(1,0), 
  "DO_NOT_EMAIL_IND" NUMBER(1,0), 
  "LAST_STATE_UPDATE_TS" DATE,
  "LAST_STATE_UPDATED_BY" NUMBER(18,0),
  "COMPARABLE_KEY" VARCHAR2(2000)) ;

   COMMENT ON COLUMN "EMRS_D_CLIENT"."CLIENT_ID" IS 'Client ID (PK)';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."CLIENT_NUMBER" IS 'Client Number';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."MANAGED_CARE_PROGRAM" IS 'Managed Care Program of This Client';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."FULL_NAME" IS 'Full Name';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."FIRST_NAME" IS 'First Name';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."MIDDLE_INITIAL" IS 'Middle Initial';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."LAST_NAME" IS 'Last Name';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."COVERAGE_TYPE" IS 'Coverage Type';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."ENROLLMENT_STATUS" IS 'Enrollment Status';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."TRANSACTION_HOLD" IS 'Transaction Hold (Y;N)';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."MANAGED_CARE_CANDIDATE" IS 'Managed Care Candidate (Y;N)';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."BASE_PLAN" IS 'Base Plan';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."RACE" IS 'Race of Client';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."SEX" IS 'Sex;Gender of Client';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."DATE_OF_BIRTH" IS 'Date of Birth';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."PHONE" IS 'Phone Number';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."SOCIAL_SECURITY_NUMBER" IS 'Social Security Number';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."ADD1" IS 'Address 1';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."ADD2" IS 'Address 2';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."CITY" IS 'City';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."ST" IS 'State';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."ZIP" IS 'Zip Code';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."COUNTY" IS 'County';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."SSN_RAILROAD_CLAIM_NUMBER" IS 'SS;Railroad Claim Number';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."RECORD_DATE" IS 'Record Creation Date';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."RECORD_TIME" IS 'Record Creation Time';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."RECORD_NAME" IS 'Record Creation Name';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."MODIFIED_DATE" IS 'Record Modification Date';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."MODIFIED_TIME" IS 'Record Modification Time';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."MODIFIED_NAME" IS 'Record Modification Name';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."VERSION" IS 'Type-2 SCD Version Number';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."DATE_OF_VALIDITY_START" IS 'ETL Required Column to Designate the Start-Date for a Valid Slowly Changing Dimension (SCD) Record';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."DATE_OF_VALIDITY_END" IS 'ETL Required Column to Designate the End-Date for a Valid Slowly Changing Dimension (SCD) Record';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."DATE_CREATED" IS 'Warehouse Load Creation Date';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."CREATED_BY" IS 'Warehouse Load Created By';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."UPDATED_BY" IS 'Warehouse Load Updated By';
   COMMENT ON COLUMN "EMRS_D_CLIENT"."DATE_UPDATED" IS 'Warehouse Load Date Updated';
/
--------------------------------------------------------
--  DDL for Index CLIENT_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "CLIENT_PK" ON "EMRS_D_CLIENT" ("CLIENT_ID") ;
/
--------------------------------------------------------
--  Constraints for Table EMRS_D_CLIENT
--------------------------------------------------------

  ALTER TABLE "EMRS_D_CLIENT" MODIFY ("SOURCE_RECORD_ID" NOT NULL ENABLE);
  ALTER TABLE "EMRS_D_CLIENT" MODIFY ("CURRENT_FLAG" NOT NULL ENABLE);
  ALTER TABLE "EMRS_D_CLIENT" ADD CONSTRAINT "CLIENT_PK" PRIMARY KEY ("CLIENT_ID") ENABLE;
  ALTER TABLE "EMRS_D_CLIENT" MODIFY ("CLIENT_ID" NOT NULL ENABLE);
  ALTER TABLE "EMRS_D_CLIENT" MODIFY ("MANAGED_CARE_PROGRAM" NOT NULL ENABLE);
  ALTER TABLE "EMRS_D_CLIENT" MODIFY ("CREATED_BY" NOT NULL ENABLE);
/
--------------------------------------------------------
--  Ref Constraints for Table EMRS_D_CLIENT
--------------------------------------------------------

  ALTER TABLE "EMRS_D_CLIENT" ADD CONSTRAINT "CLIENT_CLIENTNUM_FK" FOREIGN KEY ("CLIENT_NUMBER") REFERENCES "EMRS_D_CLIENT_REF" ("CLIENT_NUMBER") DISABLE;
/
--------------------------------------------------------
--  DDL for Trigger BIR_CLIENTS
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "BIR_CLIENTS" 
 BEFORE INSERT
 ON emrs_d_client
 FOR EACH ROW
DECLARE
    v_seq_id     EMRS_D_CLIENT.client_id%TYPE;
BEGIN
  IF :NEW.client_id IS NULL THEN
    SElECT EMRS_SEQ_CLIENT_ID.NEXTVAL
    INTO v_seq_id
    FROM dual;

    :NEW.client_id       := v_seq_id;
  END IF;
  :NEW.created_by := user;
  :NEW.date_created := sysdate;
END BIR_CLIENTS;
/
ALTER TRIGGER "BIR_CLIENTS" ENABLE;
/
