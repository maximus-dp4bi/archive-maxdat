-- add the unique constraints to the metric tables

ALTER TABLE F_METRIC 
    ADD CONSTRAINT F_METRIC__UN UNIQUE (D_METRIC_PROJECT_ID, D_REPORTING_PERIOD_ID);
    
ALTER TABLE D_REPORTING_PERIOD 
    ADD CONSTRAINT D_REPORTING_PERIOD__UN UNIQUE (TYPE, END_DATE);
    
ALTER TABLE D_METRIC_PROJECT 
    ADD CONSTRAINT D_METRIC_PROJECT__UN UNIQUE (D_PROJECT_ID, D_PROGRAM_ID, D_GEOGRAPHY_MASTER_ID, D_METRIC_DEFINITION_ID, RECORD_EFF_DT);
    
ALTER TABLE D_METRIC_DEFINITION
    ADD CONSTRAINT D_METRIC_DEFINITION__UN UNIQUE (D_DATA_TYPE_ID, NAME, RECORD_EFF_DT);
  
ALTER TABLE D_DATA_TYPE
    ADD CONSTRAINT D_DATA_TYPE__UN UNIQUE (NAME);
    
    
INSERT INTO CC_L_PATCH_LOG ( PATCH_VERSION , SCRIPT_SEQUENCE , SCRIPT_NAME) 
VALUES ('2.2','001','001_METRIC_TABLE_UNIQUE_CONSTRAINTS');

COMMIT;
