ALTER TABLE CC_A_ADHOC_JOB 
RENAME COLUMN START_DATETIME to START_DATETIME_PARAM;

ALTER TABLE CC_A_ADHOC_JOB 
RENAME COLUMN END_DATETIME to END_DATETIME_PARAM;

ALTER TABLE CC_A_ADHOC_JOB 
RENAME COLUMN EXECUTION_DATE to JOB_START_DATE;

ALTER TABLE CC_A_ADHOC_JOB
MODIFY (IS_PENDING CHAR (1) DEFAULT '1' NOT NULL);

ALTER TABLE CC_A_ADHOC_JOB
ADD (JOB_END_DATE DATE NULL);

ALTER TABLE CC_A_ADHOC_JOB
ADD (IS_RUNNING CHAR (1) DEFAULT '0' NOT NULL);

ALTER TABLE CC_A_ADHOC_JOB
ADD (ADHOC_JOB_TYPE varchar(50) NULL);

ALTER TABLE CC_A_SCHEDULED_JOB 
RENAME COLUMN START_DATETIME to START_DATETIME_PARAM;

ALTER TABLE CC_A_SCHEDULED_JOB 
RENAME COLUMN END_DATETIME to END_DATETIME_PARAM;

ALTER TABLE CC_A_SCHEDULED_JOB 
RENAME COLUMN EXECUTION_DATE to JOB_START_DATE;

ALTER TABLE CC_A_SCHEDULED_JOB
ADD (JOB_END_DATE DATE NULL);

ALTER TABLE CC_A_SCHEDULED_JOB 
ADD (IS_RUNNING CHAR (1) DEFAULT '0' NOT NULL);

ALTER TABLE CC_A_SCHEDULED_JOB 
ADD (SCHEDULED_JOB_TYPE varchar(50) NULL);

CREATE OR REPLACE TRIGGER BIU_CC_A_ADHOC_JOB BEFORE
  INSERT OR
  UPDATE ON CC_A_ADHOC_JOB FOR EACH ROW ENABLE BEGIN IF INSERTING
  AND :NEW.ADHOC_JOB_ID IS NULL THEN
  SELECT SEQ_CC_A_ADHOC_JOB.NEXTVAL INTO :NEW.ADHOC_JOB_ID FROM DUAL;
END IF;
IF INSERTING THEN
  :NEW.CREATION_DATE := SYSDATE;
END IF;
END;
/

CREATE OR REPLACE TRIGGER BIU_CC_A_SCHEDULED_JOB BEFORE
  INSERT OR
  UPDATE ON CC_A_SCHEDULED_JOB FOR EACH ROW ENABLE BEGIN IF INSERTING
  AND :NEW.SCHEDULED_JOB_ID IS NULL THEN
  SELECT SEQ_CC_A_SCHEDULED_JOB.NEXTVAL INTO :NEW.SCHEDULED_JOB_ID FROM DUAL;
END IF;
IF INSERTING THEN
  :NEW.JOB_START_DATE := SYSDATE;
END IF;
END;
/

UPDATE CC_A_ADHOC_JOB
SET ADHOC_JOB_TYPE = 'load_contact_center';

UPDATE CC_A_SCHEDULED_JOB
SET SCHEDULED_JOB_TYPE = 'load_contact_center';

ALTER TABLE CC_A_ADHOC_JOB  
MODIFY (ADHOC_JOB_TYPE NOT NULL );

ALTER TABLE CC_A_SCHEDULED_JOB  
MODIFY (SCHEDULED_JOB_TYPE NOT NULL );

INSERT INTO CC_L_PATCH_LOG ( PATCH_VERSION , SCRIPT_SEQUENCE , SCRIPT_NAME) 
VALUES ('0.1.6','004','004_UPDATE_CC_A_SCHEDULED_JOB__CC_A_ADHOC_JOB');

COMMIT;