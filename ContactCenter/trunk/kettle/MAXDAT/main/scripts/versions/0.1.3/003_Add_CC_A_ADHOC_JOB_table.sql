CREATE SEQUENCE SEQ_CC_A_ADHOC_JOB START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999999999999 MINVALUE 1 CACHE 20 ;

CREATE TABLE CC_A_ADHOC_JOB
  (
    ADHOC_JOB_ID   NUMBER NOT NULL ,
    START_DATETIME VARCHAR2 (50) NOT NULL ,
    END_DATETIME   VARCHAR2 (50) NOT NULL ,
    IS_PENDING     CHAR (1) DEFAULT '1' ,
    EXECUTION_DATE DATE ,
    SUCCESS        CHAR (1) DEFAULT '0' ,
    CREATION_DATE  DATE NOT NULL
  )
  LOGGING ;
ALTER TABLE CC_A_ADHOC_JOB ADD CONSTRAINT CC_A_ADHOC_JOB_PK PRIMARY KEY
(
  ADHOC_JOB_ID
)
;

CREATE OR REPLACE TRIGGER BIU_CC_A_ADHOC_JOB 
    BEFORE INSERT OR UPDATE ON CC_A_ADHOC_JOB 
    FOR EACH ROW 
    ENABLE 
BEGIN 
IF INSERTING AND :NEW.ADHOC_JOB_ID IS NULL THEN 
          SELECT SEQ_CC_A_ADHOC_JOB.NEXTVAL INTO :NEW.ADHOC_JOB_ID FROM DUAL;
END IF;
IF INSERTING THEN 
          :NEW.CREATION_DATE := SYSDATE;
END IF;
END;  
/

INSERT INTO CC_L_PATCH_LOG ( PATCH_VERSION , SCRIPT_SEQUENCE , SCRIPT_NAME)
VALUES ('0.1.3','003','003_Add_CC_A_ADHOC_JOB_table');

COMMIT;