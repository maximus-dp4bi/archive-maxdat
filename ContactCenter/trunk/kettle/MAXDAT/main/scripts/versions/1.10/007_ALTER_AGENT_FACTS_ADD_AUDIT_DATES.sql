

ALTER TABLE CC_F_AGENT_BY_DATE ADD (CREATE_DATE DATE);
ALTER TABLE CC_F_AGENT_BY_DATE ADD (CREATED_BY VARCHAR2(30));
ALTER TABLE CC_F_AGENT_BY_DATE ADD (LAST_UPDATE_DATE DATE);
ALTER TABLE CC_F_AGENT_BY_DATE ADD (LAST_UPDATE_BY VARCHAR2(30));

ALTER TABLE CC_F_AGENT_ACTIVITY_BY_DATE ADD (CREATE_DATE DATE);
ALTER TABLE CC_F_AGENT_ACTIVITY_BY_DATE ADD (CREATED_BY VARCHAR2(30));
ALTER TABLE CC_F_AGENT_ACTIVITY_BY_DATE ADD (LAST_UPDATE_DATE DATE);
ALTER TABLE CC_F_AGENT_ACTIVITY_BY_DATE ADD (LAST_UPDATE_BY VARCHAR2(30));


CREATE OR REPLACE VIEW CC_F_AGENT_BY_DATE_SV  AS
SELECT CC_F_AGENT_BY_DATE.* FROM CC_F_AGENT_BY_DATE ;

CREATE OR REPLACE VIEW CC_F_AGENT_ACTIVITY_BY_DATE_SV  AS
SELECT CC_F_AGENT_ACTIVITY_BY_DATE.* FROM CC_F_AGENT_ACTIVITY_BY_DATE ;

DROP TRIGGER BI_CC_F_AGENT_BY_DATE;

CREATE OR REPLACE TRIGGER "BIU_CC_F_AGENT_BY_DATE" 
  BEFORE INSERT OR UPDATE ON CC_F_AGENT_BY_DATE 
  FOR EACH ROW 
BEGIN
IF INSERTING AND :NEW.F_AGENT_BY_DATE_ID IS NULL THEN 
  SELECT SEQ_CC_F_AGENT_BY_DATE.NEXTVAL INTO :NEW.F_AGENT_BY_DATE_ID FROM DUAL;
  :NEW.CREATE_DATE := SYSDATE;
  :NEW.CREATED_BY := USER; 
END IF;
:NEW.LAST_UPDATE_DATE := SYSDATE;
:NEW.LAST_UPDATE_BY := USER;
END;  
/
ALTER TRIGGER "BIU_CC_F_AGENT_BY_DATE" ENABLE;




DROP TRIGGER BI_CC_F_AGENT_ACTVTY_BY_DATE;

CREATE OR REPLACE TRIGGER "BIU_CC_F_AGENT_ACTVTY_BY_DATE" 
  BEFORE INSERT OR UPDATE ON CC_F_AGENT_ACTIVITY_BY_DATE 
  FOR EACH ROW 
BEGIN
IF INSERTING AND :NEW.F_AGENT_ACTIVITY_BY_DATE_ID IS NULL THEN 
  SELECT SEQ_CC_F_AGENT_ACTVTY_BY_DATE.NEXTVAL INTO :NEW.F_AGENT_ACTIVITY_BY_DATE_ID FROM DUAL;
  :NEW.CREATE_DATE := SYSDATE;
  :NEW.CREATED_BY := USER; 
END IF;
:NEW.LAST_UPDATE_DATE := SYSDATE;
:NEW.LAST_UPDATE_BY := USER;
END;  
/
ALTER TRIGGER "BIU_CC_F_AGENT_ACTVTY_BY_DATE" ENABLE;



INSERT INTO CC_L_PATCH_LOG ( PATCH_VERSION , SCRIPT_SEQUENCE , SCRIPT_NAME)
VALUES ('1.10.0','007','007_ALTER_AGENT_FACTS_ADD_AUDIT_DATES');

COMMIT;




