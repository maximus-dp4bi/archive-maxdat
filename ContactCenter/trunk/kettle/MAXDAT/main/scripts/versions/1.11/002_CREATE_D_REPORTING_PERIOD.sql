CREATE TABLE D_REPORTING_PERIOD 
    ( 
     D_REPORTING_PERIOD_ID NUMBER (19)  NOT NULL , 
     TYPE VARCHAR2 (50) , 
     START_DATE DATE , 
     END_DATE DATE , 
     MONTH VARCHAR2 (50) , 
     YEAR NUMBER (19) , 
     CREATE_DATE DATE , 
     CREATED_BY VARCHAR2 (50) , 
     LAST_MODIFIED_DATE DATE , 
     UPDATED_BY VARCHAR2 (50) 
    ) 
    LOGGING 
;


ALTER TABLE D_REPORTING_PERIOD 
    ADD CONSTRAINT D_REPORTING_PERIOD_PK PRIMARY KEY ( D_REPORTING_PERIOD_ID ) ;
    
CREATE SEQUENCE SEQ_D_REPORTING_PERIOD 
    START WITH 1 
    INCREMENT BY 1 
    MAXVALUE 9999999999999999999 
    MINVALUE 1 
    CACHE 20 
;

CREATE OR REPLACE TRIGGER BIU_D_REPORTING_PERIOD 
    BEFORE INSERT OR UPDATE ON D_REPORTING_PERIOD 
    FOR EACH ROW 
BEGIN
IF INSERTING AND :NEW.D_REPORTING_PERIOD_ID IS NULL THEN 
          SELECT SEQ_D_REPORTING_PERIOD.NEXTVAL INTO :NEW.D_REPORTING_PERIOD_ID FROM DUAL;      
	:NEW.CREATE_DATE := SYSDATE;
	:NEW.CREATED_BY := USER;
END IF;
:NEW.LAST_MODIFIED_DATE := SYSDATE;
:NEW.UPDATED_BY := USER;

END; 
/

ALTER TRIGGER BIU_D_REPORTING_PERIOD ENABLE; 


INSERT INTO CC_L_PATCH_LOG ( PATCH_VERSION , SCRIPT_SEQUENCE , SCRIPT_NAME)
VALUES ('1.11.0','002','002_CREATE_D_REPORTING_PERIOD');

COMMIT;