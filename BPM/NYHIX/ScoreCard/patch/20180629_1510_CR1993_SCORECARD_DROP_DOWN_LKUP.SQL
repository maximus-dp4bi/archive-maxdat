DROP TABLE DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP CASCADE CONSTRAINTS;

CREATE TABLE DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP
(
  TARGET_TABLE          VARCHAR2(100 CHAR)      NOT NULL,
  TARGET_COLUMN         VARCHAR2(100 CHAR)      NOT NULL,
  DROP_DOWN_ORDER       NUMBER(5)               NOT NULL,
  DROP_DOWN_VALUE       VARCHAR2(100 CHAR)      NOT NULL,
  EFFECTIVE_DATE        DATE,
  END_DATE              DATE,
  DROP_DOWN_METRIC      NUMBER(5),
  DROP_DOWN_RANGE_LOW   NUMBER(5),
  DROP_DOWN_RANGE_HIGH  NUMBER(5)
)
TABLESPACE MAXDAT_DATA
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
MONITORING;


GRANT SELECT ON DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP TO DP_SCORECARD_READ_ONLY;

GRANT SELECT ON DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP TO MAXDAT_READ_ONLY;

GRANT SELECT, INSERT, UPDATE, DELETE ON DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP TO MAXDAT;

SET DEFINE OFF;
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'REVIEW_SESSIONS_COMPLTD_RATING', 1, 'Exceeds', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 12, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'REVIEW_SESSIONS_COMPLTD_RATING', 2, 'Acceptable', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 6, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'REVIEW_SESSIONS_COMPLTD_RATING', 3, 'Unacceptable', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 0, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'LIVE_OBSRV_COMPLTD_RATING', 1, 'Exceeds', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 12, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'LIVE_OBSRV_COMPLTD_RATING', 2, 'Acceptable', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 6, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'LIVE_OBSRV_COMPLTD_RATING', 3, 'Unacceptable', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 0, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_CHECKLIST_COMPLTD_RATING', 1, 'Exceeds', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 12, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_CHECKLIST_COMPLTD_RATING', 2, 'Acceptable', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 6, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_CHECKLIST_COMPLTD_RATING', 3, 'Unacceptable', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 0, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_QUALITY_SCORE_1_RATING', 1, 'Exceeds (>95%)', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 6, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_QUALITY_SCORE_1_RATING', 2, 'Acceptable (Quality score remained the same or improved)', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 3, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_QUALITY_SCORE_1_RATING', 3, 'Unacceptable (Quality Score Decreased)', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 0, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_QUALITY_SCORE_2_RATING', 1, 'Exceeds (>95%)', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 6, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_QUALITY_SCORE_2_RATING', 2, 'Acceptable (Quality score remained the same or improved)', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 3, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_QUALITY_SCORE_2_RATING', 3, 'Unacceptable (Quality Score Decreased)', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, 0, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUIZ', 'CBT_EXAM_TIMELINESS', 1, 'On Time', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, NULL, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUIZ', 'CBT_EXAM_TIMELINESS', 2, 'Overdue', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, NULL, NULL, NULL);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_EVALUATION_RATING', 1, '5 - Superior', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, NULL, 43, 99999);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_EVALUATION_RATING', 2, '4 - Above Expectations', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, NULL, 31, 42);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_EVALUATION_RATING', 3, '3 - Meets Expectatins', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, NULL, 19, 30);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_EVALUATION_RATING', 4, '2 - Below Expectations', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, NULL, 15, 18);
Insert into SCORECARD_DROP_DOWN_LKUP
   (TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, EFFECTIVE_DATE, 
    END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
 Values
   ('SC_AUDIT_TEAM_LEAD_QUALITY', 'QPP_EVALUATION_RATING', 5, '1 - Unacceptable', TO_DATE('1/1/2017', 'MM/DD/YYYY'), 
    NULL, NULL, 0, 14);
COMMIT;

-------------------------------------------------------------------
--------------------------------------------------------------------
-------------------------------------------------------------------

DROP VIEW DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP_SV;

CREATE OR REPLACE FORCE VIEW DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP_SV
(TARGET_TABLE, TARGET_COLUMN, DROP_DOWN_ORDER, DROP_DOWN_VALUE, DROP_DOWN_TEXT, 
 EFFECTIVE_DATE, END_DATE, DROP_DOWN_METRIC, DROP_DOWN_RANGE_LOW, DROP_DOWN_RANGE_HIGH)
AS 
SELECT
TARGET_TABLE,
TARGET_COLUMN,
DROP_DOWN_ORDER,
DROP_DOWN_value,
case when drop_down_metric is not null
	then
	DROP_DOWN_value||' ('||drop_down_metric||')'
	else Drop_down_value
end as Drop_down_text,
Effective_date,
trunc(nvl(END_DATE,sysdate)) as END_DATE,
DROP_DOWN_METRIC,
DROP_DOWN_RANGE_LOW,
DROP_DOWN_RANGE_HIGH
FROM DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP
order by target_table, target_column, drop_down_order, drop_down_text;


GRANT SELECT ON DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP_SV TO DP_SCORECARD_READ_ONLY;

GRANT SELECT ON DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP_SV TO MAXDAT_READ_ONLY;

GRANT SELECT ON DP_SCORECARD.SCORECARD_DROP_DOWN_LKUP_SV TO MAXDAT_REPORTS;

