-- NYHIX-35000
-- Drop trigger
declare  c int;
begin
    select count(*) into c from user_triggers where trigger_name = 'F_MFD_RECEIVED_COUNTS';
    if c = 1 then
       execute immediate 'drop trigger F_MFD_RECEIVED_COUNTS';
    end if;
end;
/

CREATE OR REPLACE TRIGGER MAXDAT.F_MFD_RECEIVED_COUNTS
    BEFORE INSERT OR UPDATE ON MAXDAT.F_MFD_RECEIVED_COUNTS
    FOR EACH ROW

BEGIN
IF INSERTING AND :NEW.F_RECEIVED_COUNTS_ID IS NULL THEN
     SELECT MAXDAT.SEQ_F_RECEIVED_COUNTS.NEXTVAL INTO :NEW.F_RECEIVED_COUNTS_ID FROM DUAL;
  :NEW.CREATE_DATE := SYSDATE;
  :NEW.CREATED_BY := USER;
END IF;
:NEW.UPDATED_BY := USER;
:NEW.UPDATE_DATE := SYSDATE;
END;
/
