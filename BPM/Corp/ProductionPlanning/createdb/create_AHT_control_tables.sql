CREATE SEQUENCE SEQ_PP_A_ADHOC_JOB START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999999999999 MINVALUE 1 CACHE 20 ;


CREATE TABLE PP_A_ADHOC_JOB
  (
    ADHOC_JOB_ID         NUMBER NOT NULL ,
    ADHOC_JOB_TYPE       VARCHAR2 (50) NOT NULL ,
    START_DATETIME_PARAM VARCHAR2 (50) NOT NULL ,
    END_DATETIME_PARAM   VARCHAR2 (50) NOT NULL ,
    CREATION_DATE        DATE NOT NULL ,
    IS_PENDING           CHAR (1) DEFAULT '1' NOT NULL ,
    IS_RUNNING           CHAR (1) DEFAULT '0' NOT NULL ,
    JOB_START_DATE       DATE ,
    JOB_END_DATE         DATE ,
    SUCCESS              CHAR (1) DEFAULT '0'
  )
  TABLESPACE MAXDAT_DATA LOGGING ;
ALTER TABLE PP_A_ADHOC_JOB ADD CONSTRAINT PP_A_ADHOC_JOB_PK PRIMARY KEY
(
  ADHOC_JOB_ID
)
;




CREATE OR REPLACE TRIGGER BIU_PP_A_ADHOC_JOB 
    BEFORE INSERT OR UPDATE ON PP_A_ADHOC_JOB 
    FOR EACH ROW 
    ENABLE 
BEGIN 
IF INSERTING AND :NEW.ADHOC_JOB_ID IS NULL THEN 
          SELECT SEQ_PP_A_ADHOC_JOB.NEXTVAL INTO :NEW.ADHOC_JOB_ID FROM DUAL;
END IF;
IF INSERTING THEN 
          :NEW.CREATION_DATE := SYSDATE;
END IF;
END;  
/


