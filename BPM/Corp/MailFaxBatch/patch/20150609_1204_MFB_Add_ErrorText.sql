
--add to CORP_ETL_MFB_SBM_OLTP
alter table CORP_ETL_MFB_SBM_OLTP add ERRORTEXT varchar2(255) null;
comment on column CORP_ETL_MFB_SBM_OLTP.ERRORTEXT is 'StatsBatchModule Error Information';

--add to CORP_ETL_MFB_BATCH_EVENTS_OLTP
alter table CORP_ETL_MFB_BATCH_EVENTS_OLTP add ERROR_TEXT varchar2(255) null;
comment on column CORP_ETL_MFB_BATCH_EVENTS_OLTP.ERROR_TEXT is 'StatsBatchModule Error Information';

--add to CORP_ETL_MFB_BATCH_EVENTS_STG
alter table CORP_ETL_MFB_BATCH_EVENTS_STG add ERROR_TEXT varchar2(255) null;
comment on column CORP_ETL_MFB_BATCH_EVENTS_STG.ERROR_TEXT is 'StatsBatchModule Error Information';

--add to CORP_ETL_MFB_BATCH_EVENTS
alter table CORP_ETL_MFB_BATCH_EVENTS add ERROR_TEXT varchar2(255) null;
comment on column CORP_ETL_MFB_BATCH_EVENTS.ERROR_TEXT is 'StatsBatchModule Error Information';

--update d_mfbbatch_events_current_sv
create or replace view D_MFBBATCH_EVENTS_CURRENT_SV as
select
  BATCH_MODULE_ID,
  BATCH_GUID,
  MODULE_LAUNCH_ID,
  MODULE_UNIQUE_ID,
  MODULE_NAME,
  MODULE_CLOSE_ID as MODULE_CLOSE_UNIQUE_ID,
  MODULE_CLOSE_NAME,
  BATCH_STATUS,
  MODULE_START_DT,
  MODULE_END_DT,
  USER_NAME as MODULE_LAUNCH_USER_NAME,
  STATION_ID,
  SITE_NAME,
  SITE_ID,
  BATCH_DELETED,
  DOC_PAGES as PAGES_PER_DOCUMENT,
  PAGES_SCANNED,
  PAGES_DELETED,
  DOCS_CREATED as DOCUMENTS_CREATED,
  DOCS_DELETED as DOCUMENTS_DELETED,
  PAGES_REPLACED,
  SOURCE_SERVER,
  ERROR_TEXT
from CORP_ETL_MFB_BATCH_EVENTS WITH READ ONLY
;

--update d_mfbbatch_events_curmod_sv
CREATE or replace VIEW D_MFBBATCH_EVENTS_CURMOD_SV
AS SELECT c.CURRENT_BATCH_MODULE_ID,
  c.BATCH_GUID,
  e.MODULE_LAUNCH_ID,
  e.MODULE_UNIQUE_ID,
  e.MODULE_NAME,
  e.MODULE_CLOSE_ID AS MODULE_CLOSE_UNIQUE_ID,
  e.MODULE_CLOSE_NAME,
  e.BATCH_STATUS,
  e.MODULE_START_DT,
  e.MODULE_END_DT,
  e.USER_NAME AS MODULE_LAUNCH_USER_NAME,
  e.STATION_ID,
  e.SITE_NAME,
  e.SITE_ID,
  e.BATCH_DELETED,
  e.DOC_PAGES AS PAGES_PER_DOCUMENT,
  e.PAGES_SCANNED,
  e.PAGES_DELETED,
  e.DOCS_CREATED AS DOCUMENTS_CREATED,
  e.DOCS_DELETED AS DOCUMENTS_DELETED,
  e.PAGES_REPLACED ,
  e.SOURCE_SERVER,
  e.ERROR_TEXT
FROM CORP_ETL_MFB_BATCH_EVENTS e, D_MFB_CURRENT c
WHERE e.BATCH_MODULE_ID = c.CURRENT_BATCH_MODULE_ID WITH READ ONLY;
