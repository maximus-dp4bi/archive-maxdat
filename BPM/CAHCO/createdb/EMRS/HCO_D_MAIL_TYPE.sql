CREATE SEQUENCE  "HCO_SEQ_MAILTYPE_ID"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 582 CACHE 5 NOORDER  NOCYCLE ;

GRANT SELECT ON "HCO_SEQ_MAILTYPE_ID" TO "MAXDAT_READ_ONLY";

CREATE TABLE HCO_D_MAIL_TYPE
  (MAIL_TYPE_ID NUMBER, 	 
	 MAIL_TYPE_CODE VARCHAR2(32), 	
   MAIL_TYPE VARCHAR2(240),
   START_DATE DATE,
   END_DATE DATE,
   IS_PACKET VARCHAR2(10),
   MANDATORY_VOLUNTARY VARCHAR2(10),
   PPD_REQUIRED VARCHAR2(10),
   DP_MAIL_TYPE_ID NUMBER NOT NULL
   ) TABLESPACE MAXDAT_DATA ;

ALTER TABLE "HCO_D_MAIL_TYPE" ADD CONSTRAINT "MAILTYPE_MAILTYPEID_UK" UNIQUE ("MAIL_TYPE_ID") USING INDEX TABLESPACE "MAXDAT_INDX"  ENABLE; 
ALTER TABLE "HCO_D_MAIL_TYPE" ADD CONSTRAINT "MAILTYPE_PK" PRIMARY KEY ("DP_MAIL_TYPE_ID") USING INDEX TABLESPACE "MAXDAT_INDX"  ENABLE;
  
GRANT SELECT ON "HCO_D_MAIL_TYPE" TO "MAXDAT_READ_ONLY";

CREATE OR REPLACE TRIGGER "BIR_MAILTYPE" 
 BEFORE INSERT
 ON hco_d_mail_type
 FOR EACH ROW
DECLARE
    v_seq_id     HCO_D_MAIL_TYPE.dp_mail_type_id%TYPE;
BEGIN
  IF :NEW.dp_mail_type_id IS NULL THEN
    SElECT HCO_SEQ_MAILTYPE_ID.NEXTVAL
    INTO v_seq_id
    FROM dual;

    :NEW.dp_mail_type_id       := v_seq_id;
  END IF;
END BIR_MAILTYPE;
/
ALTER TRIGGER "BIR_MAILTYPE" ENABLE;
/

CREATE OR REPLACE VIEW HCO_D_MAIL_TYPE_SV
AS
SELECT mail_type_id
       ,mail_type_code
       ,mail_type
       ,start_date
       ,end_date
       ,is_packet
       ,mandatory_voluntary
       ,ppd_required
FROM hco_d_mail_type;

GRANT SELECT ON "HCO_D_MAIL_TYPE_SV" TO "MAXDAT_READ_ONLY";
