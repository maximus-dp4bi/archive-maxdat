alter table d_crs_expert_specialty_types rename to d_crs_expert_specialties;

alter table d_crs_expert_specialties
rename column dcest_id to dces_id;

alter table d_crs_expert_specialties
rename column  expert_specialty_type_id to expert_specialty_id;

alter table d_crs_expert_specialties
rename column expert_specialty_type_code to expert_specialty_code;

alter table d_crs_expert_specialties
rename column expert_specialty_type_name to expert_specialty_name;

alter table d_crs_expert_specialties drop PRIMARY KEY;

alter table d_crs_expert_specialties drop constraint DCEST__UN;

ALTER TABLE D_CRS_EXPERT_SPECIALTIES ADD CONSTRAINT DCES_ID_PK PRIMARY KEY
(
  DCES_ID
)
;

ALTER TABLE D_CRS_EXPERT_SPECIALTIES ADD CONSTRAINT DCES__UN UNIQUE
(
  EXPERT_SPECIALTY_ID
)
;

CREATE OR REPLACE VIEW D_CRS_EXP_SPECIALTIES_SV AS
SELECT
DCES_ID 
,EXPERT_SPECIALTY_ID
,EXPERT_SPECIALTY_CODE 
,EXPERT_SPECIALTY_NAME 
,EXPERT_SPECIALTY_SORT_ORDER
,EXPERT_SPECIALTY_ACTIVE_FLAG
,CREATE_DT                           
,UPDATE_DT  
FROM D_CRS_EXPERT_SPECIALTIES;

CREATE OR REPLACE VIEW S_CRS_IMR_EXPERT_REVIEW_SV AS
SELECT 
SCIER_ID        
,IMR_ID 
,EXPERT_REVIEW_ID        
,EXPERT_ID	
,AUTHORIZATION_AMT		
,CLARIFICATION_RECEIVED_DT	
,EXPERT_TYPE_ID			
,RCCMD_EXPERT_SPECIALTY_ID	
,APPROVAL_DESC			
,EXPERT_REVIEW_SENT_DT		
,ASSGN_EXPERT_SPECIALTY_ID	
,AUTHORIZATION_DT		
,CLARIFICATTION_SENT_DT		
,APPROVAL_DT			
,ASSIGNED_EXPERT_ID		
,EXPERT_RECEIVED_DT		
,APPROVED_FLAG			
,REFERRED_DT			
,EXPERT_REVIEW_DUE_DT		
,IMR_EXPERT_LICENSE_CODE	
,EXPERT_REVIEW_DECISION		
,EXPERT_ASSIGNMENT_METHOD_ID	
,AUTHORIZATION_FLAG		
,ASSIGNED_EXPERT_SUBSPECIALTY	
,ASSIGNED_EXPERT_STATE_ID	
,CREATE_DT                      
,CREATED_BY                     
,LAST_UPDATE_DT                 
,LAST_UPDATED_BY              
FROM S_CRS_IMR_EXPERT_REVIEW
WITH READ ONLY;

CREATE PUBLIC SYNONYM D_CRS_EXPERT_SPECIALTIES FOR D_CRS_EXPERT_SPECIALTIES;

CREATE PUBLIC SYNONYM D_CRS_EXP_SPECIALTIES_SV FOR D_CRS_EXP_SPECIALTIES_SV;

CREATE SEQUENCE SEQ_DCES_ID START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999999999999 MINVALUE 1 CACHE 20 ;

DROP TRIGGER BI_D_CRS_EXP_SPECLTY_TYPES;

CREATE OR REPLACE TRIGGER BI_D_CRS_EXP_SPECLTIES
    BEFORE INSERT ON D_CRS_EXPERT_SPECIALTIES
    FOR EACH ROW 
    ENABLE 
BEGIN
IF INSERTING AND :NEW.DCES_ID IS NULL THEN 
          SELECT SEQ_DCES_ID.NEXTVAL INTO :NEW.DCES_ID FROM DUAL;      
END IF;
IF INSERTING THEN
  :NEW.CREATE_DT := SYSDATE;
END IF;
:NEW.UPDATE_DT := SYSDATE;
END;  
/