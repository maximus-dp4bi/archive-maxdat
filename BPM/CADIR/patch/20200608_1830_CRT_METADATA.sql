CREATE TABLE D_CRS_METADATA
  (
    MD_ID                 NUMBER (19) NOT NULL ,
    MD_TYPE               VARCHAR2(30) ,
    MD_PARENT_ID          NUMBER(10),
    MD_VALUE              VARCHAR2(255),
    MD_ORDER              NUMBER(10),   
    MD_YEAR               NUMBER(4)              
  ) TABLESPACE MAXDAT_DATA;

grant select, insert, update on D_CRS_METADATA to MAXDAT_OLTP_SIU;
grant select, insert, update, delete on D_CRS_METADATA to MAXDAT_OLTP_SIUD;
grant select on D_CRS_METADATA to MAXDAT_READ_ONLY; 

CREATE TABLE S_CRS_IMR_SELECTS 
  (
    SLCT_ID               NUMBER (19) NOT NULL ,
    SLCT_ISS_DISPUTE_ID   NUMBER(19),
    SLCT_ORDER            NUMBER(10),
    SLCT_TOPIC_ID         NUMBER(10),
    SLCT_CHAPTER_ID       NUMBER(10),
	SLCT_GUIDELINE		  VARCHAR2(10),
	ACTIVE			      VARCHAR2(1) DEFAULT 1
  ) TABLESPACE MAXDAT_DATA;

CREATE INDEX S_SLCT_ISS_ID_IDX ON S_CRS_IMR_SELECTS (SLCT_ISS_DISPUTE_ID) TABLESPACE MAXDAT_INDX;

CREATE INDEX S_SLCT_ID_IDX ON S_CRS_IMR_SELECTS (SLCT_ID) TABLESPACE MAXDAT_INDX;

grant select, insert, update on S_CRS_IMR_SELECTS to MAXDAT_OLTP_SIU;
grant select, insert, update, delete on S_CRS_IMR_SELECTS to MAXDAT_OLTP_SIUD;
grant select on S_CRS_IMR_SELECTS to MAXDAT_READ_ONLY; 

---------------------

CREATE TABLE S_SELECTIONS_TO_DWC
  (
    IMR_ID            NUMBER (20),
    DWC_SENT          VARCHAR2(1) default 'N',
    DWC_SENT_DATE     DATE
  ) TABLESPACE MAXDAT_DATA;

CREATE INDEX SELECTIONS_TO_DWC_IMR_IDX ON S_SELECTIONS_TO_DWC (IMR_ID) TABLESPACE MAXDAT_INDX;

grant select, insert, update on S_SELECTIONS_TO_DWC to MAXDAT_OLTP_SIU;
grant select, insert, update, delete on S_SELECTIONS_TO_DWC to MAXDAT_OLTP_SIUD;
grant select on S_SELECTIONS_TO_DWC to MAXDAT_READ_ONLY; 

---------------------

CREATE SEQUENCE SEQ_SCIRED_ID START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999999999999 MINVALUE 1 CACHE 2 ;

CREATE TABLE S_CRS_IMR_REDACTED
  (
    SCIRED_ID  	   		  NUMBER (20) NOT NULL,
    IMR_ID                NUMBER (20),
    RED_DWC_SENT          VARCHAR2(1) default 'N',
    RED_DWC_SENT_DATE     DATE,
    CREATE_DT             DATE,
    CREATED_BY            VARCHAR2(50),
    UPDATE_DT             DATE,
    LAST_UPDATED_BY       VARCHAR2(50)
  ) TABLESPACE MAXDAT_DATA;

ALTER TABLE S_CRS_IMR_REDACTED ADD CONSTRAINT SCIRED_ID_PK PRIMARY KEY (SCIRED_ID) ;

CREATE INDEX S_CRS_IMR_REDACTED_IDX ON S_CRS_IMR_REDACTED (IMR_ID,RED_DWC_SENT) TABLESPACE MAXDAT_INDX;

CREATE OR REPLACE TRIGGER BIU_S_CRS_IMR_REDACTED
    BEFORE INSERT OR UPDATE ON S_CRS_IMR_REDACTED
    FOR EACH ROW 
    ENABLE 
BEGIN
IF INSERTING AND :NEW.SCIRED_ID IS NULL THEN 
          SELECT SEQ_SCIRED_ID.NEXTVAL INTO :NEW.SCIRED_ID FROM DUAL;      
END IF;
IF INSERTING THEN
  :NEW.CREATE_DT := SYSDATE;
  :NEW.CREATED_BY:= USER;
END IF;
:NEW.UPDATE_DT := SYSDATE;
:NEW.LAST_UPDATED_BY:= USER;
END;
/

-- Grant/Revoke object privileges 
grant select, insert, update on S_CRS_IMR_REDACTED to MAXDAT_OLTP_SIU;
grant select, insert, update, delete on S_CRS_IMR_REDACTED to MAXDAT_OLTP_SIUD;
grant select on S_CRS_IMR_REDACTED to MAXDAT_READ_ONLY;

---------------------

