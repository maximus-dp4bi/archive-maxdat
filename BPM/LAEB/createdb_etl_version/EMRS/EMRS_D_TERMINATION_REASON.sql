CREATE SEQUENCE  "EMRS_SEQ_TERM_REASON_CODE_ID"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 92481 CACHE 5 NOORDER  NOCYCLE ;

GRANT SELECT ON "EMRS_SEQ_TERM_REASON_CODE_ID" TO &role_name;

CREATE TABLE EMRS_D_TERMINATION_REASON
   (TERM_REASON_CODE_ID NUMBER NOT NULL, 	
    REASON_CODE VARCHAR2(80), 	  
    REASON VARCHAR2(500)   
   ) TABLESPACE &tablespace_name ;

 ALTER TABLE "EMRS_D_TERMINATION_REASON" ADD CONSTRAINT "TERMREAS_PLANCODE_UK" UNIQUE ("REASON_CODE") USING INDEX TABLESPACE &tablespace_name  ENABLE;
 ALTER TABLE "EMRS_D_TERMINATION_REASON" ADD CONSTRAINT "TERMREAS_PK" PRIMARY KEY ("TERM_REASON_CODE_ID") USING INDEX TABLESPACE &tablespace_name  ENABLE;
  
GRANT SELECT ON "EMRS_D_TERMINATION_REASON" TO &role_name;

  CREATE OR REPLACE TRIGGER "BIR_TERMINATION_REASONS" 
 BEFORE INSERT
 ON emrs_d_termination_reason
 FOR EACH ROW
DECLARE
    v_seq_id     EMRS_D_TERMINATION_REASON.term_reason_code_id%TYPE;
BEGIN
  IF :NEW.term_reason_code_id IS NULL THEN
    SElECT EMRS_SEQ_TERM_REASON_CODE_ID.NEXTVAL
    INTO v_seq_id
    FROM dual;

    :NEW.term_reason_code_id       := v_seq_id;
  END IF;
END BIR_TERMINATION_REASONS;
/
ALTER TRIGGER "BIR_TERMINATION_REASONS" ENABLE;
/



CREATE OR REPLACE VIEW EMRS_D_TERMINATION_REASON_SV
AS
SELECT reason_code
       ,reason       
FROM emrs_d_termination_reason;

GRANT SELECT ON "EMRS_D_TERMINATION_REASON_SV" TO &role_name;
