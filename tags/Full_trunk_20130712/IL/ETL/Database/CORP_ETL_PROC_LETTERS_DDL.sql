CREATE TABLE "CORP_ETL_PROC_LETTERS" 
   (	"CEPN_ID" NUMBER NOT NULL ENABLE, 
	"LETTER_REQUEST_ID" NUMBER NOT NULL ENABLE, 
	"CREATE_DT" DATE NOT NULL ENABLE, 
	"CREATE_BY" VARCHAR2(50 BYTE), 
	"REQUEST_DT" DATE, 
	"LETTER_TYPE" VARCHAR2(100 BYTE), 
	"PROGRAM" VARCHAR2(50 BYTE), 
	"CASE_ID" NUMBER, 
	"COUNTY_CODE" VARCHAR2(10 BYTE), 
	"ZIP_CODE" NUMBER, 
	"LANGUAGE" VARCHAR2(32 BYTE), 
	"REPRINT" VARCHAR2(1 BYTE), 
	"REQUEST_DRIVER_TYPE" VARCHAR2(10 BYTE), 
	"REQUEST_DRIVER_TABLE" VARCHAR2(32 BYTE), 
	"STATUS" VARCHAR2(32 BYTE) NOT NULL ENABLE, 
	"STATUS_DT" DATE NOT NULL ENABLE, 
	"SENT_DT" DATE, 
	"PRINT_DT" DATE, 
	"MAILED_DT" DATE, 
	"RETURN_DT" DATE, 
	"RETURN_REASON" VARCHAR2(100 BYTE), 
	"REJECT_REASON" VARCHAR2(100 BYTE), 
	"ERROR_REASON" VARCHAR2(100 BYTE), 
	"TRANSMIT_FILE_NAME" VARCHAR2(100 BYTE), 
	"TRANSMIT_FILE_DT" DATE, 
	"LETTER_RESP_FILE_NAME" VARCHAR2(100 BYTE), 
	"LETTER_RESP_FILE_DT" DATE, 
	"LAST_UPDATE_DT" DATE, 
	"LAST_UPDATE_BY_NAME" VARCHAR2(50 BYTE), 
	"NEWBORN_FLAG" VARCHAR2(1 BYTE), 
	"TASK_ID" NUMBER, 
	"CANCEL_DT" DATE, 
	"CANCEL_BY" VARCHAR2(50 BYTE), 
	"COMPLETE_DT" DATE, 
	"INSTANCE_STATUS" VARCHAR2(10 BYTE) NOT NULL ENABLE, 
	"ASSD_PROCESS_LETTER_REQ" DATE, 
	"ASED_PROCESS_LETTER_REQ" DATE, 
	"ASSD_TRANSMIT" DATE, 
	"ASED_TRANSMIT" DATE, 
	"ASSD_RECEIVE_CONFIRMATION" DATE, 
	"ASED_RECEIVE_CONFIRMATION" DATE, 
	"ASSD_CREATE_ROUTE_WORK" DATE, 
	"ASED_CREATE_ROUTE_WORK" DATE, 
	"ASF_PROCESS_LETTER_REQ" VARCHAR2(1 BYTE) NOT NULL ENABLE, 
	"ASF_TRANSMIT" VARCHAR2(1 BYTE) NOT NULL ENABLE, 
	"ASF_RECEIVE_CONFIRMATION" VARCHAR2(1 BYTE) NOT NULL ENABLE, 
	"ASF_CREATE_ROUTE_WORK" VARCHAR2(1 BYTE) NOT NULL ENABLE, 
	"GWF_VALID" VARCHAR2(1 BYTE), 
	"GWF_OUTCOME" VARCHAR2(1 BYTE), 
	"GWF_WORK_REQUIRED" VARCHAR2(1 BYTE), 
	"STG_EXTRACT_DATE" DATE NOT NULL ENABLE, 
	"STG_LAST_UPDATE_DATE" DATE NOT NULL ENABLE, 
	"STAGE_DONE_DATE" DATE, 
	 CONSTRAINT "CORP_ETL_PROC_LETTERS_PK" PRIMARY KEY ("CEPN_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "MAXDAT_DATA"  ENABLE, 
	 CONSTRAINT "CORP_ETL_PROC_LETTERS_ID" UNIQUE ("LETTER_REQUEST_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "MAXDAT_DATA"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "MAXDAT_DATA" ;

  CREATE INDEX "CORP_ETL_PROC_LETTERS_CANC_DT" ON "CORP_ETL_PROC_LETTERS" ("CANCEL_DT") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "MAXDAT_DATA" ;

  CREATE INDEX "CORP_ETL_PROC_LETTERS_COMP_DT" ON "CORP_ETL_PROC_LETTERS" ("COMPLETE_DT") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "MAXDAT_DATA" ;

  CREATE INDEX "CORP_ETL_PROC_LETTERS_STAT" ON "CORP_ETL_PROC_LETTERS" ("INSTANCE_STATUS") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "MAXDAT_DATA" ;


CREATE SEQUENCE  "SEQ_CEPN_ID"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;


  CREATE OR REPLACE TRIGGER "TRG_R_corp_etl_PROC_LETTER" BEFORE
  INSERT OR
  UPDATE ON CORP_ETL_PROC_LETTERS FOR EACH ROW
BEGIN
  IF Inserting THEN
    IF :NEW.CEPN_ID IS NULL THEN
      SELECT SEQ_CEPN_ID.Nextval INTO :NEW.CEPN_ID FROM Dual;
    END IF;
    IF :NEW.stg_extract_date IS NULL THEN
      :NEW.stg_extract_date  := SYSDATE;
    END IF;
  END IF;
  :NEW.STG_LAST_UPDATE_DATE := SYSDATE;
END;
/
ALTER TRIGGER "TRG_R_corp_etl_PROC_LETTER" ENABLE;

 