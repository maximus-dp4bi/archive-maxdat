--------------------------------------------------------
--  File created - Monday-April-22-2013   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table FLHK_ETL_MANAGE_WORK
--------------------------------------------------------

  CREATE TABLE "FLHK_ETL_MANAGE_WORK" 
   ("MW_ID" NUMBER, 
    "TASK_ID" NUMBER, 
    "PARENT_TASK_ID" NUMBER, 
    "TASK_TYPE" VARCHAR2(100 BYTE), 
    "TASK_STATUS" VARCHAR2(100 BYTE), 
    "STATUS_DATE" DATE, 
    "STATUS_REASON" VARCHAR2(100 BYTE), 
    "CREATE_DATE" DATE, 
    "CREATED_BY_NAME" VARCHAR2(100 BYTE), 
    "PRIORITY" VARCHAR2(100 BYTE), 
    "DUE_DATE" DATE, 
    "ASSIGNED_TO" VARCHAR2(100 BYTE), 
    "QUEUE" VARCHAR2(100 BYTE), 
    "CONTEXT" VARCHAR2(100 BYTE), 
    "DRIVER_TYPE" VARCHAR2(100 BYTE), 
    "DRIVER_KEY" VARCHAR2(50 BYTE), 
    "ACTION_CATEGORY" VARCHAR2(100 BYTE), 
    "RULE_EXECUTED" VARCHAR2(100 BYTE), 
    "ROLE_NAME" VARCHAR2(20 BYTE), 
    "CANCEL_WORK_DATE" DATE, 
    "COMPLETE_DATE" DATE, 
    "INSTANCE_STATUS" VARCHAR2(100 BYTE) DEFAULT 'Active', 
    "LAST_UPDATE_DATE" DATE, 
    "LAST_UPDATE_BY_NAME" VARCHAR2(100 BYTE), 
    "ASF_CANCEL_WORK" VARCHAR2(1 BYTE) DEFAULT 'N', 
    "STAGE_DONE_DATE" DATE DEFAULT NULL, 
    "STG_EXTRACT_DATE" DATE DEFAULT SYSDATE, 
    "STG_LAST_UPDATE_DATE" DATE DEFAULT SYSDATE, 
    "ASF_COMPLETE_WORK" VARCHAR2(1 BYTE) DEFAULT 'N', 
    "ASSD_COMPLETE_TASK" DATE, 
    "ASED_COMPLETE_TASK" DATE, 
    "MW_PROCESSED" VARCHAR2(1 BYTE) DEFAULT 'N'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SCHIP_DATA" ;
--------------------------------------------------------
--  DDL for Index FLHK_ETL_MANAGED_WORK_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "FLHK_ETL_MANAGED_WORK_PK" ON "FLHK_ETL_MANAGE_WORK" ("MW_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SCHIP_DATA" ;
--------------------------------------------------------
--  Constraints for Table FLHK_ETL_MANAGE_WORK
--------------------------------------------------------

  ALTER TABLE "FLHK_ETL_MANAGE_WORK" ADD CONSTRAINT "FLHK_ETL_MANAGED_WORK_PK" PRIMARY KEY ("MW_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SCHIP_DATA"  ENABLE;
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("MW_PROCESSED" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("ASSD_COMPLETE_TASK" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("ASF_COMPLETE_WORK" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("STG_LAST_UPDATE_DATE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("STG_EXTRACT_DATE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("ASF_CANCEL_WORK" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("INSTANCE_STATUS" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("DRIVER_KEY" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("DRIVER_TYPE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("PRIORITY" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("STATUS_DATE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("TASK_STATUS" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("TASK_TYPE" NOT NULL ENABLE);
  ALTER TABLE "FLHK_ETL_MANAGE_WORK" MODIFY ("TASK_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  DDL for Trigger TRG_ETL_MANAGE_WORK
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "TRG_ETL_MANAGE_WORK" 
   before insert on "FLHK_ETL_MANAGE_WORK" 
   for each row 
begin  
   if inserting then 
      if :NEW."MW_ID" is null then 
         select FLHK_ETL_MANAGED_WORK_SEQ.nextval into :NEW."MW_ID" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "TRG_ETL_MANAGE_WORK" ENABLE;
